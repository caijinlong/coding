cc_library(name = 'indri_lib',
           srcs = [
           'AnchorTextHarvester.cpp',
           'Annotator.cpp',
           'ArabicStemmerTransformation.cpp',
           'Arabic_Stemmer_utf8.cpp',
           'BooleanAndNode.cpp',
           'BulkTree.cpp',
           'CachedFrequencyBeliefNode.cpp',
           'CombinedVocabularyIterator.cpp',
           'Combiner.cpp',
           'CompressedCollection.cpp',
           'ContextCountAccumulator.cpp',
           'ContextInclusionAndNode.cpp',
           'ContextSimpleCountAccumulator.cpp',
           'Copier.cpp',
           'DeletedDocumentList.cpp',
           'DirectoryIterator.cpp',
           'DiskDocExtentListIterator.cpp',
           'DiskDocListFileIterator.cpp',
           'DiskDocListIterator.cpp',
           'DiskDocumentDataIterator.cpp',
           'DiskFrequentVocabularyIterator.cpp',
           'DiskIndex.cpp',
           'DiskKeyfileVocabularyIterator.cpp',
           'DiskTermListFileIterator.cpp',
           'DocExtentListMemoryBuilder.cpp',
           'DocExtentListMemoryBuilderIterator.cpp',
           'DocListIteratorNode.cpp',
           'DocListMemoryBuilder.cpp',
           'DocListMemoryBuilderIterator.cpp',
           'DocumentIteratorFactory.cpp',
           'DocumentStructure.cpp',
           'DocumentStructureHolderNode.cpp',
           'DocumentVector.cpp',
           'ExtentAndNode.cpp',
           'ExtentChildNode.cpp',
           'ExtentDescendantNode.cpp',
           'ExtentEnforcementNode.cpp',
           'ExtentInsideNode.cpp',
           'ExtentOrNode.cpp',
           'ExtentParentNode.cpp',
           'ExtentRestrictionNode.cpp',
           'FieldBetweenNode.cpp',
           'FieldEqualsNode.cpp',
           'FieldGreaterNode.cpp',
           'FieldIteratorNode.cpp',
           'FieldLessNode.cpp',
           'FieldWildcardNode.cpp',
           'FileClassEnvironmentFactory.cpp',
           'File.cpp',
           'FileTreeIterator.cpp',
           'FilterRejectNode.cpp',
           'FilterRequireNode.cpp',
           'FixedPassageNode.cpp',
           'HTMLParser.cpp',
           'IndexEnvironment.cpp',
           'IndexWriter.cpp',
           'IndriTimer.cpp',
           'InferenceNetworkBuilder.cpp',
           'InferenceNetwork.cpp',
           'KrovetzStemmer.cpp',
           'KrovetzStemmerTransformation.cpp',
           'LengthPriorNode.cpp',
           'ListAccumulator.cpp',
           'ListBeliefNode.cpp',
           'LocalQueryServer.cpp',
           'MboxDocumentIterator.cpp',
           'MemoryDocumentDataIterator.cpp',
           'MemoryIndex.cpp',
           'MemoryIndexTermListFileIterator.cpp',
           'NestedExtentInsideNode.cpp',
           'NestedListBeliefNode.cpp',
           'NetworkMessageStream.cpp',
           'NetworkServerProxy.cpp',
           'NetworkServerStub.cpp',
           'NexiLexer.cpp',
           'NexiParser.cpp',
           'NormalizationTransformation.cpp',
           'NotNode.cpp',
           'NullListNode.cpp',
           'NullScorerNode.cpp',
           'OfficeHelper.cpp',
           'OffsetAnnotationAnnotator.cpp',
           'OffsetMetadataAnnotator.cpp',
           'OrderedWindowNode.cpp',
           'OrNode.cpp',
           'Packer.cpp',
           'PageRank.cpp',
           'Parameters.cpp',
           'ParserFactory.cpp',
           'Path.cpp',
           'PDFDocumentExtractor.cpp',
           'PlusNode.cpp',
           'PonteExpander.cpp',
           'Porter_Stemmer.cpp',
           'PorterStemmerTransformation.cpp',
           'PowerPointDocumentExtractor.cpp',
           'PriorFactory.cpp',
           'PriorListIterator.cpp',
           'PriorNode.cpp',
           'QueryAnnotation.cpp',
           'QueryEnvironment.cpp',
           'QueryExpander.cpp',
           'QueryLexer.cpp',
           'QueryParser.cpp',
           'QueryParserFactory.cpp',
           'QueryStopper.cpp',
           'ReformulateQuery.cpp',
           'RelevanceModel.cpp',
           'Repository.cpp',
           'RepositoryLoadThread.cpp',
           'RepositoryMaintenanceThread.cpp',
           'RMExpander.cpp',
           'ShrinkageBeliefNode.cpp',
           'SnippetBuilder.cpp',
           'StemmerFactory.cpp',
           'StopperTransformation.cpp',
           'StopStructureRemover.cpp',
           'TaggedDocumentIterator.cpp',
           'TaggedTextParser.cpp',
           'TermFrequencyBeliefNode.cpp',
           'TermScoreFunctionFactory.cpp',
           'TextDocumentExtractor.cpp',
           'TextParser.cpp',
           'TextTokenizer.cpp',
           'TFIDFExpander.cpp',
           'TFIDFTermScoreFunction.cpp',
           'Thread.cpp',
           'TokenizerFactory.cpp',
           'uint64comp.cpp',
           'UnorderedWindowNode.cpp',
           'Unpacker.cpp',
           'UnpackerInternal.cpp',
           'UTF8CaseNormalizationTransformation.cpp',
           'UTF8Transcoder.cpp',
           'UtilityThread.cpp',
           'Walker.cpp',
           'WARCDocumentIterator.cpp',
           'WeightedAndNode.cpp',
           'WeightedExtentOrNode.cpp',
           'WeightedSumNode.cpp',
           'WordDocumentExtractor.cpp',
           'WPlusNode.cpp',
           'XMLNode.cpp',
           'XMLReader.cpp',
           'XMLWriter.cpp'
                  ],
           deps = [
                  '//third_part/indri5.6/lemur:lemur_contri',
                  '//third_part/indri5.6/antlr:antlr',
                  '//third_part/indri5.6/xpdf:xpdf',
                  '//third_part/indri5.6/zlib:zlib',
           ], 
           copt = ['no_style_check', 'no_Werror'],
           cflags = [
                     '-Wno-reorder',                                                                                                                               
                     '-Wno-unused-variable',

                     '-DINDRI_STANDALONE=1',
                     '-DHAVE_LIBM=1',
                     '-DHAVE_LIBPTHREAD=1',
                     '-DHAVE_NAMESPACES=',
                     '-DISNAN_IN_NAMESPACE_STD=',
                     '-DHAVE_FSEEKO=1',
                     '-DSTDC_HEADERS=1',
                     '-DHAVE_SYS_TYPES_H=1',
                     '-DHAVE_SYS_STAT_H=1',
                     '-DHAVE_STDLIB_H=1',
                     '-DHAVE_STRING_H=1',
                     '-DHAVE_MEMORY_H=1',
                     '-DHAVE_STRINGS_H=1',
                     '-DHAVE_INTTYPES_H=1',
                     '-DHAVE_STDINT_H=1',
                     '-DHAVE_UNISTD_H=1',
                     '-DHAVE_MKSTEMP=1'
                     '-DHAVE_MKSTEMPS=1'
                     '-DNDEBUG=1']
           )


